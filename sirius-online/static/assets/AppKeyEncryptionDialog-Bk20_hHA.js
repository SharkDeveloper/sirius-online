import{av as T,cj as N,b as D,a as S,c as w,i as C,ck as V,P as x,r as n,o as I,e as _,w as t,g as o,h as c,aB as k,n as K,p as h,a3 as B,j as L,v as R,cd as G,aX as M,ag as O,aC as Q,cl as U}from"./app-X261GMLD.js";import{c as q}from"./settings.services-CtvtW5n1.js";const F={__name:"AppKeyEncryptionDialog",props:N({type:{validator(r){return["setting","controller"].includes(r)}}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const y=D(),s=S(),m=w(()=>s.value.SETTINGS.MAIN),f=C("$toast"),i=V(r,"modelValue"),b=r;x(i,a=>{a||(u.value=!1,d.value="",g.value="")});const u=n(!1),d=n(""),g=n(""),p=n(!1);async function E(){try{p.value=!0,await q(b.type,{password:d.value,useDefaultKey:u.value}),f.add(s.value.SETTINGS.MAIN.TOAST.CHANGE_KEY.SUCCESS),y.commit("setNeedReboot",!0,{root:!0})}catch(a){console.error(a),f.add(s.value.SETTINGS.MAIN.TOAST.CHANGE_KEY.FAILED)}finally{p.value=!1}}const A=a=>{a.data!==null&&a.data.match(U)&&a.preventDefault()},v=n(null);return(a,l)=>(I(),_(Q,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e)},{default:t(()=>[o(c(k),{title:m.value.BUTTON.changeKeyEncryption,onClose:l[2]||(l[2]=e=>i.value=!1),class:"w-full",closable:""},{footer:t(()=>{var e;return[o(K,{loading:p.value,label:c(s).GENERAL.BUTTON.change,class:"text-button ml-auto","data-testid":"change-btn",color:"primary",type:"submit",onClick:(e=v.value)==null?void 0:e.submit},null,8,["loading","label","onClick"])]}),default:t(()=>[o(h,{ref_key:"qFormRef",ref:v,onSubmit:E,class:"column gap-12"},{default:t(()=>[o(B,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),label:m.value.LABEL.useDefaultKey,class:"b-checkbox","left-label":""},null,8,["modelValue","label"]),o(L,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),label:m.value.LABEL.key+" *",rules:[e=>c(R).string().required().validate(e)],disable:u.value,onBeforeinput:A,maxlength:"256","data-testid":"password-input",class:"b-field",autogrow:""},{default:t(()=>[o(G,{"max-width":"300px",class:"bg-dark text-white q-pa-sm text-base"},{default:t(()=>[M(O(c(s).GENERAL.ADDITIONAL_HINT.key),1)]),_:1})]),_:1},8,["modelValue","label","rules","disable"])]),_:1},512)]),_:1},8,["title"])]),_:1},8,["modelValue"]))}},j=T(F,[["__scopeId","data-v-5425e5a9"]]);export{j as A};
