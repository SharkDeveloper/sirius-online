import{av as T,bs as I,b as w,a as N,i as U,r as n,o as x,e as L,w as o,g as a,dS as E,dT as O,d1 as Q,dU as f,ah as y,h as t,dV as V,f as h,ag as B,p as H,j as v,dW as k,dX as P,dY as R,dZ as D,n as G,d_ as j,d$ as C,e0 as F}from"./app-X261GMLD.js";const $={class:"text-h6 text-weight-bold text-center mb-28"},z={class:"auth-card__fields"},W={__name:"AppAuthPage",setup(Y){const _=I(),b=w(),s=N(),r=U("$toast"),m=n(),i=n(""),c=n(""),u=n(!0),p=n(!1),g=()=>{const d=crypto.getRandomValues(new Uint8Array(16));return Array.from(d).map(S=>S.toString(16).padStart(2,"0")).join("").slice(0,-1)};async function A(){m.value.validate().then(async d=>{if(d)try{p.value=!0;const e=g();await C(i.value,c.value,e),F(e),b.commit("setIsAuth",!0);const l=sessionStorage.getItem("redirect-to-path")||"/";sessionStorage.removeItem("redirect-to-path"),_.push(l)}catch(e){switch(console.error(e),e.status){case 400:r.add(s.value.AUTH.TOAST.SIGN_IN.REQUIRED);break;case 401:r.add(s.value.AUTH.TOAST.SIGN_IN.WRONG);break;case 503:r.add(s.value.AUTH.TOAST.SIGN_IN.BUSY);break;default:r.add(s.value.AUTH.TOAST.SIGN_IN.FAILED);break}}finally{p.value=!1}})}return(d,e)=>(x(),L(j,null,{default:o(()=>[a(E,null,{default:o(()=>[a(O,{class:"row justify-center items-center",style:{"min-height":"100dvh"}},{default:o(()=>[a(Q,{class:"auth-card no-shadow rounded-borders"},{default:o(()=>[a(f,{class:"row justify-center q-pa-none"},{default:o(()=>[a(y,{name:t(V),class:"bolid-logo text-primary"},null,8,["name"])]),_:1}),a(f,{class:"px-20"},{default:o(()=>[h("div",$,B(t(s).AUTH.LABEL.name),1),a(H,{onSubmit:A,ref_key:"authForm",ref:m},{default:o(()=>[h("div",z,[a(v,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),label:t(s).AUTH.LABEL.login,rules:t(k),"max-length":31,class:"b-field","lazy-rules":"",type:"username",autocomplete:"username","data-testid":"login-input"},null,8,["modelValue","label","rules"]),a(v,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),label:t(s).AUTH.LABEL.password,type:u.value?"password":"text",rules:t(P),hint:t(s).GENERAL.ADDITIONAL_HINT.password,class:"b-field",autocomplete:"password","lazy-rules":"","data-testid":"password-input",inputmode:"numeric"},{append:o(()=>[a(y,{name:u.value?t(R):t(D),onClick:e[1]||(e[1]=l=>u.value=!u.value),class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","label","type","rules","hint"])]),a(G,{label:t(s).AUTH.BUTTON.signIn,loading:p.value,color:"primary",class:"text-button full-width",type:"submit",padding:"18px 0","data-testid":"auth-btn"},null,8,["label","loading"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},X=T(W,[["__scopeId","data-v-d4c64464"]]);export{X as default};
