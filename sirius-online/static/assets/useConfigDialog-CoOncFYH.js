import{a as M,b as B,u as F,ci as V,c as g,H as k,_ as Y,aG as W,O as $}from"./app-X261GMLD.js";const ee=()=>{const a=M(),u=B(),{t:L}=F(),h=W(),{captureInterface:O,releaseInterface:T}=V(),v=g(()=>u.getters["zone/ZONE_LIST"]),b=g(()=>u.getters["output/OUTPUT_LIST"]),y=g(()=>u.getters["reader/READER_LIST"]),C=g(()=>u.getters["zone_group/ZONE_GROUP_LIST"]),p=(e,t="primary")=>({label:e,color:t}),R={color:"negative",label:a.value.GENERAL.BUTTON.delete},S={color:"negative",label:a.value.GENERAL.BUTTON.deactivate},G={label:a.value.GENERAL.BUTTON.cancel,class:"fill-input"},w=p(a.value.GENERAL.BUTTON.continue,"positive"),U=p(a.value.GENERAL.BUTTON.ok),d=({title:e,message:t,ok:n,cancel:i=G,html:o=!1})=>new Promise(l=>{h.create({title:e,message:t,ok:n,cancel:i,html:o}).onOk(()=>l(!0)).onDismiss(()=>l(!1))}),E=(e,t="",n=!1)=>d({title:e,message:t,ok:R,html:n}),x=(e,t="",n=!1)=>d({title:e,message:t,ok:S,html:n}),m=(e,t="",n=!1)=>d({title:e,message:t,ok:w,html:n}),D=(e,t="",n=!1)=>d({title:e,message:t,ok:U,cancel:null,html:n}),P=e=>{const t=e.fullName||e.formattedName||e.name;if(Object.hasOwn(e,"zone_index")&&e.zone_index!==$){const i=v.value[e.zone_index];return L("config.general.elementIn",{elementName:t,zoneName:i==null?void 0:i.fullName})}return t},Z=(e,t,n)=>{if(!n.length)return[e,"",!0];const i=`<ul class="m-0 px-32">${n.map(P).reduce((l,c)=>l+`<li class="py-4">${c}</li>`,"")}</ul>`,o=`<div class="pb-8">${t}</div>`+i;return[e,o,!0]},r=(e,t,n,i)=>e(...Z(t,n,i)),_=e=>{const{DELETE_MODAL:t,CONTINUE_MODAL:n}=a.value.CONFIGURATION.GENERAL,i=e.some(c=>c.elementType==="device"),o=e.some(c=>c.elementType!=="device"),l=e.length>1?"multiple":"single";return i&&o?{title:t.title.elementsAndDevices,continueSubtitle:n.subtitle.devices,deleteSubtitle:t.subtitle.devices}:i?{title:t.title.devices[l],continueSubtitle:n.subtitle.devices,deleteSubtitle:t.subtitle.devices}:{title:t.title.elements[l],continueSubtitle:"",deleteSubtitle:""}},z=e=>{const t=u.getters["device/hasElementAttachedZonePt"];return e.filter(n=>n.elementType==="device"&&t(n))};return{showDeleteDialog:E,showContinueDialog:m,showOkDialog:D,confirmDuplicateContactId:async()=>{const{title:e,subtitle:t}=a.value.CONFIGURATION.DEVICES.REPEATED_CONTACT_ID;return m(e,t)},confirmElementsDeletion:async e=>{const{title:t,continueSubtitle:n}=_(e),i=z(e);if(i.length){const l=i.length<e.length;if(!await r(l?m:D,t,n,i)||!l)return;e=e.filter(s=>!i.includes(s))}const o=_(e);if(await r(E,o.title,o.deleteSubtitle,e))return e},confirmDeviceDeletion:async e=>{const{DEACTIVATE_MODAL:t,DELETE_MODAL:n}=a.value.CONFIGURATION.DEVICES,i=k(e)&&!Y,o=i?t:n,l=o.title;let c=o.content;const f=u.getters["device/relatedElementsByDeviceIndex"][e.index]||{},s=Object.values(f).flat(),I=s.filter(N=>{var A;return(A=v.value[N.zone_index])==null?void 0:A.isZonePt});if(I.length){const{error:N}=i?a.value.CONFIGURATION.GENERAL.DEACTIVATE_MODAL:a.value.CONFIGURATION.GENERAL.DELETE_MODAL;return await r(D,l,N.deviceAttachedZonePtReason,I),!1}return await r(i?x:E,l,c,s)},confirmSaveCompatibility:async e=>{if(!e.length)return!0;const{title:t,confirm:n,error:i}=a.value.CONFIGURATION.DEVICES.SAVE_MODAL,o=e.filter(l=>{var c;return(c=v.value[l.zone_index])==null?void 0:c.isZonePt});return o.length?(await r(D,t,i,o),!1):r(m,t,n,e)},showDescribedDialog:r,confirmEmptyElementDeletion:async(e,t,n)=>{const i=e.map(s=>b.value[s]).filter(s=>s&&s.related_zones.length===0&&s.related_zonegroups.length===0&&s.program_index!==255&&s.device_index!==255),o=t.map(s=>y.value[s]).filter(s=>s&&s.allowed_zones.length===0&&s.allowed_zonegroups.length===0&&s.device_index!==255),{title:l}=a.value.CONFIGURATION.DEVICES.DELETE_EMPTY_DEVICE_ELEMENTS,{outputsSubtitle:c,readersSubtitle:f}=a.value.CONFIGURATION.DEVICES.DELETE_EMPTY_DEVICE_ELEMENTS[n];T(),i.length&&await r(E,l,c,i)&&(O(),await u.dispatch("config/deleteElement",{elementList:i.map(s=>({index:s.index,type:s.elementType}))})),T(),o.length&&await r(E,l,f,o)&&(O(),await u.dispatch("config/deleteElement",{elementList:o.map(s=>({index:s.index,type:s.elementType}))}))},confirmEmptyZoneGroupDeletion:async e=>{const t=e.map(o=>C.value[o]).filter(o=>o&&o.included_zones.length===0);if(!t.length)return;const{title:n,subtitle:i}=a.value.CONFIGURATION.ZONE_GROUPS.DELETE_EMPTY_ZONE_GROUPS;T(),await r(E,n,i,t)&&(O(),await u.dispatch("config/deleteElement",{elementList:t.map(o=>({index:o.index,type:"zone_group"}))}))}}};export{ee as u};
