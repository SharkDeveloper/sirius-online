import{av as G,i as be,bO as je,o as a,l as o,aF as j,f as _,F as N,e as h,w as T,g as B,ah as E,h as p,bP as Xe,bo as D,n as M,m as d,aw as L,c as C,ag as O,bF as xe,bQ as Ke,bx as Y,bR as Ve,bS as Ge,bT as $e,a as Ae,bU as Be,ae as Qe,r as z,P as he,aj as Ue,bu as He,bv as We,bV as Ze,bW as Je,bX as et,bY as tt,a3 as lt,bZ as nt,b_ as we,bC as ke,bz as at,b$ as st,aX as rt,c0 as ot,af as V,c1 as it,c2 as dt,c3 as ct,c4 as ut,c5 as ft,c6 as gt}from"./app-X261GMLD.js";const mt=["onClick"],pt={key:1,class:"tree__expand-btn tree__expand-btn--stub"},vt={key:0,class:"tree__children"},yt={__name:"AppTreeList",props:{items:{type:Array,default:()=>[]}},setup(l){const x=be("isPrinting"),{addExpanded:u,deleteExpanded:f,isExpanded:c}=be("expanded");function v(g,r){!r.passive&&!g.target.closest(".tree__expand-btn")||(g.stopPropagation(),c(r.id)?f(r.id):u(r.id))}function $(g){return Array.isArray(g.children)}return(g,r)=>{const y=je("app-tree-list",!0);return a(!0),o(N,null,j(l.items,m=>{var I;return a(),o("div",{key:m.id,class:"tree__list"},[_("div",{class:D(["tree__node",{"tree__node--parent":$(m)}]),onClick:w=>v(w,m)},[$(m)?(a(),o(N,{key:0},[((I=m.children)==null?void 0:I.length)>0?(a(),h(M,{key:0,style:{"flex-shrink":"0"},flat:"",round:"",padding:"4px",color:"grey","data-testid":"tree-node-expand-btn",class:"tree__expand-btn print-hide"},{default:T(()=>[B(E,{name:p(Xe),class:D([p(c)(m.id)?"rotate-90":"rotate-0","dropdown-arrow"])},null,8,["name","class"])]),_:2},1024)):(a(),o("div",pt))],64)):d("",!0),L(g.$slots,"default",{item:m},void 0,!0)],10,mt),p(c)(m.id)||p(x)?(a(),o("div",vt,[B(y,{items:m.children},{default:T(({item:w})=>[L(g.$slots,"default",{item:w},void 0,!0)]),_:2},1032,["items"])])):d("",!0)])}),128)}}},bt=G(yt,[["__scopeId","data-v-075c42cd"]]),ht={key:0,class:"mx-4"},Se={__name:"AppTreeMarker",props:{marker:{type:[String,Number,Array],default:""},linked:{type:Boolean,default:!1}},emits:["link"],setup(l,{emit:x}){const u=l,f=x,c=C(()=>Array.isArray(u.marker)?u.marker:[u.marker]);function v($){u.linked&&(f("link"),$.stopPropagation())}return($,g)=>(a(),o("div",{class:"tree-marker-wrapper",onClick:v},[(a(!0),o(N,null,j(c.value,(r,y)=>(a(),o("div",{class:"tree-marker",key:r},[_("div",{class:D(["tree-marker__content",{"tree-marker__content--linked":l.linked}])},O(r),3),y<c.value.length-1?(a(),o("span",ht," â€“ ")):d("",!0)]))),128))]))}},kt=["draggable","data-id","tabindex"],_t={key:1,class:"tree-item__body"},xt={class:"tree-item__label"},$t=["title"],At={key:0,class:"tree-item__tags"},Bt=["title"],wt={key:1,class:"tree-item__drag-indicator"},St={__name:"AppTreeItem",props:{id:{type:[String,Number],required:!0},label:{type:String,default:""},marker:{type:[String,Number,Array],default:""},local:{type:Boolean,default:!1},passive:{type:Boolean,default:!1},tags:{type:Array,default:()=>[]},selected:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},notAllowed:{type:Boolean,default:!1},linked:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},stub:{type:Boolean,default:!1}},emits:["link"],setup(l,{emit:x}){const u=l,f=x,c=C(()=>!u.passive&&!u.notAllowed&&u.clickable),v=C(()=>u.passive?{"tree-item--passive":!0}:{"tree-item--local":u.local,"tree-item--selected":u.selected,"tree-item--draggable":u.draggable,"tree-item--not-allowed":u.notAllowed,"tree-item--clickable":u.clickable});return($,g)=>xe((a(),o("div",{class:D([v.value,"tree-item"]),draggable:l.draggable,"data-id":l.id,key:l.id,tabindex:c.value?0:null},[l.stub?(a(),o(N,{key:0},[],64)):(a(),o("div",_t,[_("div",xt,[l.marker?(a(),h(Se,{key:0,marker:l.marker,linked:l.linked,onLink:g[0]||(g[0]=r=>f("link"))},null,8,["marker","linked"])):d("",!0),_("span",{class:"tree-item__label-text",title:l.label},O(l.label),9,$t),_("div",{class:"tree-item__content print-hide",onClick:g[1]||(g[1]=Y(()=>{},["stop"]))},[L($.$slots,"label-content",{},void 0,!0)])]),l.tags.length>0?(a(),o("div",At,[(a(!0),o(N,null,j(l.tags,r=>(a(),o("div",{key:r.label,class:D([`fill-${r.color??"base"}`,"text-base"]),title:r.label},O(r.label),11,Bt))),128))])):d("",!0),l.draggable&&!l.passive?(a(),o("div",wt,[B(E,{name:p(Ve),size:"24px",color:"blue-300"},null,8,["name"])])):d("",!0)]))],10,kt)),[[Ke,c.value]])}},Ct=G(St,[["__scopeId","data-v-2aaa80d5"]]),Tt={__name:"AppWarningIcon",props:{warningTooltipText:{type:String,default:""}},setup(l){return(x,u)=>(a(),h(E,{name:p(Ge),title:l.warningTooltipText,style:{cursor:"help"},color:"grey-200",size:"24px"},null,8,["name","title"]))}},Et={__name:"AppReplaceableIcon",setup(l){return(x,u)=>(a(),h(E,{name:p($e),size:"24px",color:"grey-200"},null,8,["name"]))}},It={class:"tree__header"},Lt={key:0,class:"tree__title text-h1 ellipsis-2-lines"},Nt={key:1},Dt={key:3,class:"tree__select-all mt-16"},Rt={key:0,class:"text-h2"},_e=300,Mt={__name:"AppTree",props:{items:{type:[Array,Object],default:()=>[]},selected:{type:Array,default:()=>[]},title:{type:String,default:null},searchable:{type:Boolean,default:!1},isRightTree:{type:Boolean,default:!1},tabs:{type:[Array,null],default:null},tab:{type:String,default:""},addButton:{type:Boolean,default:!1},canMultipleSelection:{type:Boolean,default:!1},canSelectionAllChildren:{type:Boolean,default:!1},requiredSelection:{type:Boolean,default:!1}},emits:["update:selected","update:tab","add"],setup(l,{expose:x,emit:u}){const f=l,c=u,v=at(),$=Ae(),g=Be(),r=C({get:()=>f.selected,set:e=>{Qe(e,f.selected)||c("update:selected",e)}}),y=z([]),m=z(!1),I=z(""),w=z(new Set);let A=null,Q=0,U=0,H=0,W=0,Z=0,J=0;he(I,()=>{r.value=r.value.filter(e=>q.value.some(t=>t.id===e))});const X=C(()=>Array.isArray(f.items)?f.items:Object.values(f.items)),q=C(()=>{if(!I.value)return X.value;function e(t){return t.reduce((n,s)=>{let i=`${s.marker} ${s.label}`;s.tags&&(i+=` ${s.tags.map(S=>S.label).join(" ")}`),i+=` ${$.value.GENERAL.LABEL[s==null?void 0:s.type]||""}`;const k=i.toLowerCase().includes(I.value.toLowerCase()),b=s.children&&e(s.children).length>0;return(k&&!s.passive||b)&&n.push({...s,children:s.children?e(s.children):void 0}),n},[])}return e(X.value)}),P=C(()=>Ue(q.value,"id")),ee=C(()=>r.value.length>0),Ce=C(()=>ee.value&&q.value.every(e=>le(e.id))),ae=C(()=>P.value.get(r.value[0]));let R=null;function Te(e){let t,n;if(R===null){K([e]),R=e;return}if(R===e)return;const s=P.value.get(R),i=s!=null&&s.parentId?P.value.get(s.parentId).children:X.value;if(!i)return;const k=b=>i.findIndex(S=>S.id===b);t=k(R),n=k(e),t>n&&([t,n]=[n,t]),K(i.slice(t,n+1).map(b=>b.id))}he([()=>f.tabs,()=>f.tab],()=>{r.value=[],R=null});function se(e){r.value=[e],R=e}function K(e){if(!f.canMultipleSelection)return;let t;f.isRightTree?t=e.filter(n=>!te(n)):t=e.filter(n=>!oe(n)),t.length>0&&(r.value=[...new Set([...r.value,...t])],R=t[t.length-1])}function Ee(e,t){e?K([t.id]):re([t.id])}function re(e){(!f.requiredSelection||r.value.length-e.length>0)&&(r.value=r.value.filter(t=>!e.includes(t)))}function oe(e){var b,S;const t=P.value.get(e),n=(b=ae.value)==null?void 0:b.local,s=t==null?void 0:t.local,i=n!==s,k=(S=ae.value)==null?void 0:S.isNonMultipleEditable;return(t==null?void 0:t.isNonMultipleEditable)||i||k}function te(e){const t=P.value.get(e);return t==null?void 0:t.isNonDraggable}function le(e){return r.value.indexOf(e)!==-1}const Ie=C(()=>y.value.reduce((e,t)=>e+t.length,0));function ie(e){var s;const t=P.value.get(e),n=((s=t==null?void 0:t.children)==null?void 0:s.length)??0;if(y.value.push({id:e,length:n}),Ie.value>_e){let i=0,k=[];for(let b=y.value.length-1;b>=0;b--){const S=y.value[b];i+S.length<=_e&&(i+=S.length,k.unshift(S))}y.value=k,ke(()=>{const b=ne.value.querySelector(`[data-id='${e}']`);b==null||b.scrollIntoView({block:"center"})})}}function Le(e){y.value=y.value.filter(t=>t.id!==e)}function Ne(e){return y.value.some(t=>t.id===e)}function de(e){Z=e.pageX,J=e.pageY}function De(e){document.addEventListener("dragover",de,!0),document.body.style.overflow="hidden";let t;if(r.value.length<2){t=e.target.closest(".tree-item");const i=t.getAttribute("data-id");se(i),w.value=new Set([i])}else w.value=new Set(r.value);t=e.target.closest(".tree-item");const n=Array.from(w.value),s=[...new Set(n.map(i=>P.value.get(i).type))];v.onDragStart({itemIds:n,itemTypes:s}),Re(e,t,n.length),document.body.appendChild(A),e.dataTransfer.setDragImage(new Image,0,0)}function Re(e,t,n){var ve,ye;if(A=t.cloneNode(!0),A.querySelector(".tree-item__drag-indicator").classList.add("tree-item__drag-indicator--dragged"),A.classList.add("tree-item--ghost","tree-item--selected"),A.style.width=`${t.offsetWidth}px`,A.style.height=`${t.offsetHeight}px`,A.querySelectorAll(".q-ripple").forEach(F=>F.remove()),n>1){const F=document.createElement("div");F.textContent=w.value.size,F.classList.add("tree-item__marker--dragged","tree-marker__content"),F.style.zIndex="1",(ve=A.querySelector(".tree-item__body"))==null||ve.remove(),(ye=A.querySelector(".tree-item__tags"))==null||ye.remove(),A.appendChild(F)}const{width:i,height:k,left:b,top:S}=t.getBoundingClientRect();Q=ee.value?i/2:e.clientX-b,U=ee.value?k/2:e.clientY-S,H=(e.pageX||Z)-Q,W=(e.pageY||J)-U,Object.assign(A.style,{position:"absolute",left:`${H}px`,top:`${W}px`})}function Me(e){const t=(e.pageX||Z)-Q-H,n=(e.pageY||J)-U-W;A.style.transform=`translate3d(${t}px, ${n}px, 0)`}function Oe(e){e.preventDefault(),document.removeEventListener("dragover",de),document.body.style.overflow="visible",A.remove(),v.onDragEnd(),w.value.clear()}function qe(e){e?K(q.value.map(t=>t.id)):re(q.value.map(t=>t.id))}function Pe(e){c("update:tab",e)}function ce(e){(e.key==="Control"||e.key==="Shift")&&(m.value=!1)}function ue(e){e.altKey&&e.code==="KeyA"&&f.addButton&&(c("add"),e.preventDefault()),(e.key==="Control"||e.key==="Shift")&&(m.value=!0)}function fe(e,t,n=[]){for(const s of e){const i=[...n,s.id];if(s.id===t)return i;if(s.children){const k=fe(s.children,t,i);if(k)return k}}return null}function ze(){if(!f.selected.length)return;const e=fe(X.value,f.selected[0]);(e==null?void 0:e.length)>1&&e.forEach(t=>ie(t))}const ne=z(null),ge=z(!1);function Fe(e){ge.value&&(ze(),ke(()=>{if(e=e||document.querySelector(".tree-item--selected"),!e)return;const t=g.screen.lt.md?document.documentElement:ne.value,n=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop,s=t.clientHeight,i=e.clientHeight,k=n-s/2+i/2;t.scrollTo({top:k,behavior:"smooth"})}))}x({scrollMenuToSelected:Fe}),He(()=>{ge.value=!0,document.addEventListener("keyup",ce),document.addEventListener("keydown",ue)}),We(()=>{document.removeEventListener("keyup",ce),document.removeEventListener("keydown",ue)}),Ze("expanded",{addExpanded:ie,deleteExpanded:Le,isExpanded:Ne});function me(e){const t=Array.isArray(e.marker)?e.marker:[e.marker];return t.length>0?t[t.length-1]-t[0]+1:1}function Ye(e){if(e.passive){const t=e.children.reduce((s,i)=>(s+=me(i),s),0),n=e.children.filter(s=>!s.local).reduce((s,i)=>(s+=me(i),s),0);return e.label+` (${n}/${t})`}return e.label}function pe(e,t){const n=e.target.closest(".tree-item"),s=n.classList.contains("tree-item--not-allowed"),i=!n.classList.contains("tree-item--clickable");if(!(t.passive||s||i)){if(e.shiftKey){Te(t.id);return}if(e.ctrlKey){Ee(!le(t.id),t);return}se(t.id)}}return(e,t)=>(a(),o("div",{class:D(["tree",{"right-tree":l.isRightTree}])},[_("div",{class:"tree__body",ref_key:"treeMenuBody",ref:ne},[_("div",It,[l.title?(a(),o("span",Lt,O(l.title),1)):d("",!0),l.tabs?(a(),o("div",Nt,[B(et,{"model-value":l.tab,"onUpdate:modelValue":Pe,class:"b-tabs text-grey-200 overflow-auto full-width mb-16","indicator-color":"info","active-color":"info",dense:"","no-caps":""},{default:T(()=>[(a(!0),o(N,null,j(l.tabs,n=>(a(),h(Je,{key:n.name,name:n.name,label:n.label,class:"b-tree-tab","data-testid":`tree-tab-${n.name}`},null,8,["name","label","data-testid"]))),128))]),_:1},8,["model-value"])])):d("",!0),L(e.$slots,"header",{},void 0,!0),l.searchable?(a(),h(tt,{key:2,modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=n=>I.value=n),class:"tree__search print-hide"},null,8,["modelValue"])):d("",!0),l.canSelectionAllChildren?(a(),o("div",Dt,[B(lt,{"model-value":Ce.value,"onUpdate:modelValue":t[1]||(t[1]=n=>qe(n)),label:e.DICTIONARY.GENERAL.BUTTON.selectAll,dense:"","data-testid":"tree-select-all"},null,8,["model-value","label"])])):d("",!0)]),_("div",{class:D(["tree__items",{"tree__items--dragged":w.value.size}]),onDragstart:De,onDrag:Me,onDragend:Oe},[q.value.length==0?(a(),o("div",Rt,O(e.DICTIONARY.CONFIGURATION.GENERAL.listEmpty),1)):d("",!0),B(bt,{items:q.value},{default:T(({item:n})=>[B(Ct,{onClick:s=>pe(s,n),onKeydown:nt(s=>pe(s,n),["enter"]),id:n.id,label:Ye(n),marker:n.marker,local:n.local,passive:n.passive,tags:n.tags,draggable:l.isRightTree&&!n.passive&&!te(n.id),"not-allowed":!l.canMultipleSelection&&m.value||l.isRightTree&&te(n.id)||!l.isRightTree&&oe(n.id)&&m.value,selected:le(n.id),clickable:""},{"label-content":T(()=>[e.$slots["item-label-content"]?L(e.$slots,"item-label-content",{key:0,item:n},void 0,!0):l.isRightTree?d("",!0):(a(),o(N,{key:1},[n.replaceable?(a(),h(Et,{key:0})):d("",!0),n.warning?(a(),h(Tt,{key:1,"warning-tooltip-text":n.warning},null,8,["warning-tooltip-text"])):d("",!0)],64))]),_:2},1032,["onClick","onKeydown","id","label","marker","local","passive","tags","draggable","not-allowed","selected"])]),_:3},8,["items"])],34)],512),l.addButton?(a(),h(M,{key:0,onClick:t[2]||(t[2]=Y(n=>c("add"),["stop"])),class:"tree__add-btn print-hide",color:"primary",round:"","data-testid":"tree-add-btn",padding:"10px"},{default:T(()=>[B(E,{size:"32px",name:p(we)},null,8,["name"])]),_:1})):d("",!0)],2))}},Wt=G(Mt,[["__scopeId","data-v-ec3e2411"]]),Ot={class:"config-segment"},qt={class:"config-segment__header"},Pt={key:1,class:"text-h2"},zt={key:0,class:"w-16 row justify-center text-negative"},Ft={class:"config-segment__buttons print-hide"},Yt={class:"config-segment__body"},jt={__name:"AppConfigSegment",props:{label:{type:String,default:""},closeButton:{type:[Boolean,Object],default:!1},clearButton:{type:[Boolean,Object],default:!1},editButton:{type:[Boolean,Object],default:!1},addButton:{type:[Boolean,Object],default:!1},required:{type:Boolean,default:!1},disable:{type:Boolean,default:!1}},emits:["clear","edit","add"],setup(l,{emit:x}){const u=st(),f=l,c=x,v=z(!0);function $(){f.closeButton&&(v.value=!v.value)}return(g,r)=>(a(),o("div",Ot,[_("div",qt,[p(u).label?L(g.$slots,"label",{key:0},void 0,!0):l.label?(a(),o("span",Pt,[rt(O(l.label)+" ",1),l.required?(a(),o("span",zt," * ")):d("",!0)])):d("",!0),_("div",Ft,[l.disable?d("",!0):(a(),o(N,{key:0},[l.clearButton?(a(),h(M,V({key:0},l.clearButton,{onClick:r[0]||(r[0]=Y(y=>c("clear"),["stop"])),class:"clear-btn",color:"grey-200",round:"",flat:"",padding:"5px","data-testid":"config-segment-clear-btn",title:g.DICTIONARY.GENERAL.BUTTON.clearAll}),{default:T(()=>[B(E,{name:p(ot),size:"sm"},null,8,["name"])]),_:1},16,["title"])):d("",!0),l.editButton?(a(),h(M,V({key:1},l.editButton,{onClick:r[1]||(r[1]=Y(y=>c("edit"),["stop"])),color:"primary",round:"","data-testid":"config-segment-edit-btn",padding:"5px"}),{default:T(()=>[B(E,{size:"sm",name:p(it)},null,8,["name"])]),_:1},16)):d("",!0),l.addButton?(a(),h(M,V({key:2},l.addButton,{onClick:r[2]||(r[2]=Y(y=>c("add"),["stop"])),color:"primary",round:"","data-testid":"config-segment-edit-btn",padding:"5px"}),{default:T(()=>[B(E,{class:"add-icon",size:"sm",name:p(we)},null,8,["name"])]),_:1},16)):d("",!0)],64)),l.closeButton?(a(),h(M,V({key:1},l.closeButton,{onClick:$,class:"close-btn",color:"grey-200",flat:"",round:"",padding:"5px","data-testid":"config-segment-close-btn"}),{default:T(()=>[B(E,{name:p(dt),class:D([{"rotate-180":v.value},"dropdown-arrow text-grey"]),size:"sm"},null,8,["name","class"])]),_:1},16)):d("",!0)])]),xe(_("div",Yt,[L(g.$slots,"default",{},void 0,!0)],512),[[ct,v.value]]),v.value?L(g.$slots,"footer",{key:0},void 0,!0):d("",!0)]))}},Zt=G(jt,[["__scopeId","data-v-c1566b30"]]),Xt={class:"config-form__header-wrapper"},Kt={class:"config-form__header"},Vt={class:"config-form__title"},Gt={class:"config-form__title-text"},Qt={class:"config-form__actions"},Ut={key:0,class:"config-form__elements"},Jt={__name:"AppConfigFormHeader",props:{title:{type:String,default:""},marker:{type:[Array,String,Number],default:""},closable:{type:Boolean,default:!1},replaceable:{type:Boolean,default:!1},elementType:{type:String,default:""},showElementType:{type:Boolean,default:!1},elements:{type:Array,default:()=>[]},multipleEditing:{type:Boolean,default:!1},disablePreventCloseForm:{type:Boolean,default:!1}},emits:["close","replace","update:elements"],setup(l,{emit:x}){const u=Be(),f=Ae(),c=l,v=x,$=C(()=>{switch(c.elementType){case"input":return"fill-positive";case"output":return"fill-light-negative";default:return""}});async function g(){if(!(!c.disablePreventCloseForm&&!await gt())){if(c.closable){v("close");return}v("update:elements",[])}}return(r,y)=>(a(),o("div",Xt,[_("div",Kt,[_("div",Vt,[l.closable||p(u).screen.lt.md?(a(),h(M,{key:0,icon:p(ut),onClick:g,round:"",flat:"",dense:"",padding:"4px",color:"grey","data-testid":"config-form-header-close-btn",class:"print-hide"},null,8,["icon"])):d("",!0),l.marker&&!l.multipleEditing?(a(),h(p(Se),{key:1,class:"config-form__marker",marker:l.marker},null,8,["marker"])):d("",!0),_("span",Gt,O(l.multipleEditing?p(f).GENERAL.LABEL.multipleEditing:l.title),1)]),_("div",Qt,[l.showElementType?(a(),o("div",{key:0,class:D([$.value,"text-base px-6 py-6 br-4 non-selectable"])},O(p(f).GENERAL.LABEL[c.elementType]),3)):d("",!0),l.replaceable?(a(),h(M,{key:1,onClick:y[0]||(y[0]=m=>r.$emit("replace")),padding:"4px",color:"grey-200",dense:"",round:"",flat:"","data-testid":"config-form-header-replace-btn"},{default:T(()=>[B(E,{name:p($e),size:"24px"},null,8,["name"])]),_:1})):d("",!0)]),L(r.$slots,"default")]),l.multipleEditing?(a(),o("div",Ut,[(a(!0),o(N,null,j(c.elements,m=>(a(),h(ft,{key:m.uniqueIndex,label:m.uniqueIndex,class:"fill-input",clickable:!1,removable:"",onRemove:I=>v("update:elements",c.elements.filter(w=>w.uniqueIndex!==m.uniqueIndex))},null,8,["label","onRemove"]))),128))])):d("",!0)]))}};export{Zt as A,Jt as _,Wt as a,Ct as b};
