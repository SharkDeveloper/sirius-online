import{cv as p,cw as d,cx as u,cy as y}from"./app-X261GMLD.js";function m(s){const c=(e,t)=>new y.ModeOfOperation.ecb(t).encrypt(e);let n=(e=>{const t=[];for(let o=0;o<256;o++)e[o]?t[o]=e.charCodeAt(o).toString(16):t[o]="00";const a=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];return t.forEach((o,l)=>{const h=Math.floor(l/16);a[h].push(parseInt(o,16))}),a})(s),r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let e=0;e<16;e++){let t=[];const a=c(n[e],r);for(let o=0;o<n[e].length;o++)t.push(n[e][o]^a[o]);r=t}return r.map(e=>e.toString(16).padStart(2,"0")).join("").toUpperCase()}async function E(s,{password:c,useDefaultKey:i}){const n=u[s]+"/0",r={setting:"eth_master_key",controller:"master_key"},e="A4955A7C0C51939E863C135FF468693D";let t;return i?t=e:t=m(c),await p.send({method:n,options:{data:{[r[s]]:t},responseType:"JSON",requestType:"POST"}})}const S=s=>{const c=s.name.slice(s.name.lastIndexOf(".")).toLowerCase();if(c===".hex")return new Promise((i,n)=>{const r=new FileReader;r.onload=async()=>{try{const e=r.result,t=new Blob([e],{type:"application/octet-stream"}),a=await p.send({method:d.updateFirmwareHEX,options:{requestType:"POST",responseType:"FILE",data:t},protocol:"http"});i(a)}catch(e){n(e)}},r.onerror=()=>{n(r.error)},r.readAsText(s,"ascii")});if(c===".chp")return p.send({method:d.updateFirmwareCHP,options:{requestType:"POST",responseType:"FILE",data:s},protocol:"http"})},w=s=>p.send({method:d.updateWebClient,options:{requestType:"POST",responseType:"FILE",data:s},protocol:"http"}),f=async()=>p.send({method:d.syncTime});export{S as a,E as c,f as g,w as u};
